Server running at http://localhost:3000
Request received for /api/getNewOrdersCount
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Generated CAPTCHA stored in session: wcfqe
Login successful for user: admin First name: admin
Session saved successfully for user: mehrabi.pooya2@gmail.com
Response payload: {
  message: 'Login successful',
  username: 'admin',
  email: 'mehrabi.pooya2@gmail.com',
  firstName: 'admin'
}
Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-04-04T13:08:02.024Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false
  },
  captcha: null,
  userEmail: 'mehrabi.pooya2@gmail.com',
  username: 'admin'
}
Session userEmail: mehrabi.pooya2@gmail.com
User is authenticated
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Orders count: 7
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
users count: 2
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Generated CAPTCHA stored in session: wucjq
Login successful for user: admin First name: admin
Session saved successfully for user: mehrabi.pooya2@gmail.com
Response payload: {
  message: 'Login successful',
  username: 'admin',
  email: 'mehrabi.pooya2@gmail.com',
  firstName: 'admin'
}
Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-04-04T14:08:39.763Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false
  },
  captcha: null,
  userEmail: 'mehrabi.pooya2@gmail.com',
  username: 'admin'
}
Session userEmail: mehrabi.pooya2@gmail.com
User is authenticated
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Orders count: 7
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '1-50',
  email: 'mehrabi.pooya@gmail.com',
  mobileCode: '+213',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '1-50',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+213',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Inserting user data...
[add-user] User data inserted, userID: 1046
[add-user] Transaction committed successfully
Executing query: SELECT * FROM users
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: mehrabi.pooya3@gmail.com
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for mehrabi.pooya3@gmail.com: 1046
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Executing delete query: 
                        DELETE FROM users WHERE userID = @userID;
                        DELETE FROM userRole WHERE userID = @userID;
                    
User deleted: mehrabi.pooya3@gmail.com
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '51-100',
  email: 'mehrabi.pooya@gmail.com',
  mobileCode: '+213',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '51-100',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+213',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Inserting user data...
[add-user] User data inserted, userID: 1047
[add-user] Transaction committed successfully
Executing query: SELECT * FROM users
Executing query: SELECT * FROM users
Executing query: SELECT * FROM users
Executing query: SELECT * FROM role
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: mehrabi.pooya3@gmail.com
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for mehrabi.pooya3@gmail.com: 1047
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Executing delete query: 
                        DELETE FROM users WHERE userID = @userID;
                        DELETE FROM userRole WHERE userID = @userID;
                    
User deleted: mehrabi.pooya3@gmail.com
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: 'Above 5000',
  email: 'mehrabi.pooya@gmail.com',
  mobileCode: '+376',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: 'Above 5000',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+376',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Inserting user data...
[add-user] User data inserted, userID: 1048
[add-user] Transaction committed successfully
Executing query: SELECT * FROM users
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 3
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: mehrabi.pooya3@gmail.com
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for mehrabi.pooya3@gmail.com: 1048
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Executing delete query: 
                        DELETE FROM users WHERE userID = @userID;
                        DELETE FROM userRole WHERE userID = @userID;
                    
User deleted: mehrabi.pooya3@gmail.com
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '201-500',
  email: 'mehrabi.pooya@gmail.com',
  mobileCode: '+244',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: '201-500',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+244',
  phoneNumber: '09122147996'
}
[add-user] Connected to database
[add-user] Inserting user data...
[add-user] User data inserted, userID: 1049
[add-user] Transaction committed successfully
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: mehrabi.pooya3@gmail.com
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for mehrabi.pooya3@gmail.com: 1049
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Executing delete query: 
                        DELETE FROM users WHERE userID = @userID;
                        DELETE FROM userRole WHERE userID = @userID;
                    
User deleted: mehrabi.pooya3@gmail.com
Executing query: SELECT * FROM users
Executing query: SELECT * FROM role
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: 'Above 5000',
  email: 'mehrabi.pooya@gmail.com',
  mobileCode: '+98',
  phoneNumber: '9122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: 'Above 5000',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+98',
  phoneNumber: '9122147996'
}
[add-user] Connected to database
[add-user] Data received: {
  firstName: 'Pooya',
  lastName: 'Mehrabi',
  companyName: 'Smart Track',
  staffSize: 'Above 5000',
  email: 'mehrabi.pooya3@gmail.com',
  mobileCode: '+98',
  phoneNumber: '12345'
}
[add-user] Connected to database
[add-user] Inserting user data...
[add-user] User data inserted, userID: 1050
[add-user] Transaction committed successfully
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: mehrabi.pooya3@gmail.com
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for mehrabi.pooya3@gmail.com: 1050
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Executing delete query: 
                        DELETE FROM users WHERE userID = @userID;
                        DELETE FROM userRole WHERE userID = @userID;
                    
User deleted: mehrabi.pooya3@gmail.com
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: SELECT * FROM role
Executing query: SELECT * FROM users
Connected to the database successfully.
Processing user: test
Executing query for finding userID: 
                    SELECT userID FROM users 
                    WHERE username = @username
                
Found userID for test: 1030
Executing product check query: 
                    SELECT COUNT(*) AS productCount 
                    FROM userProduct 
                    WHERE userID = @userID
                
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Generated CAPTCHA stored in session: pcuwn
Login successful for user: admin First name: admin
Session saved successfully for user: mehrabi.pooya2@gmail.com
Response payload: {
  message: 'Login successful',
  username: 'admin',
  email: 'mehrabi.pooya2@gmail.com',
  firstName: 'admin'
}
Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-04-04T15:14:09.746Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false
  },
  captcha: null,
  userEmail: 'mehrabi.pooya2@gmail.com',
  username: 'admin'
}
Session userEmail: mehrabi.pooya2@gmail.com
User is authenticated
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: SELECT * FROM users
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Generated CAPTCHA stored in session: pk9l8
Login successful for user: admin First name: admin
Session saved successfully for user: mehrabi.pooya2@gmail.com
Response payload: {
  message: 'Login successful',
  username: 'admin',
  email: 'mehrabi.pooya2@gmail.com',
  firstName: 'admin'
}
Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-04-04T15:29:11.559Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false
  },
  captcha: null,
  userEmail: 'mehrabi.pooya2@gmail.com',
  username: 'admin'
}
Session userEmail: mehrabi.pooya2@gmail.com
User is authenticated
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Orders count: 7
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
users count: 2
Executing query: SELECT * FROM users
Executing query: SELECT * FROM role
Executing query: SELECT u.username, u.firstName, u.lastName, r.roleName FROM userRole ur
                            JOIN users u ON ur.userID = u.userID
                            JOIN role r ON ur.roleID = r.roleID; 
Executing query: 
            SELECT u.username, u.firstName, u.lastName, p.productName, up.userProductID,
                   up.requestDate, up.startDate, up.endDate, up.usernameProduct, 
                   up.passwordProduct 
            FROM userProduct up
            JOIN users u ON up.userID = u.userID
            JOIN products p ON up.productID = p.productID
            ORDER BY up.requestDate DESC;
        
Executing query: 
            SELECT username, firstName, lastName 
            FROM users 
            ORDER BY username ASC;
        
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
Generated CAPTCHA stored in session: fucjh
Login successful for user: test First name: test
Session saved successfully for user: mehrabi.pooya1@gmail.com
Response payload: {
  message: 'Login successful',
  username: 'test',
  email: 'mehrabi.pooya1@gmail.com',
  firstName: 'test'
}
Session data: Session {
  cookie: {
    path: '/',
    _expires: 2025-04-04T15:33:04.629Z,
    originalMaxAge: 86400000,
    httpOnly: true,
    secure: false
  },
  captcha: null,
  userEmail: 'mehrabi.pooya1@gmail.com',
  username: 'test'
}
Session userEmail: mehrabi.pooya1@gmail.com
User is authenticated
Request received for /api/getNewOrdersCount
Executing count query: 
            SELECT COUNT(*) AS orderCount 
            FROM userProduct 
            WHERE startDate IS NULL AND endDate IS NULL
        
Request received for /api/getUsersCount
Executing count query: 
            SELECT COUNT(*) AS userCount
            FROM users u
            WHERE NOT EXISTS (
                SELECT 1
                FROM userRole ur
                WHERE ur.userID = u.userID AND ur.roleID = 1
            )
        
Orders count: 7
users count: 2
